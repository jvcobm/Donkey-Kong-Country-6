<!doctype html>
<body>
    <canvas id="gameCanvas" width="400" height="600"></canvas>
</body>
<html>
<style>
    html{
        background-color:white;
    }
    
    canvas{
        border: 2px solid black;
    }
</style>
</html>
    <script src='player.js'></script> 
    <script src='enemy.js'></script> 
<script>
var canvas, canvasContext;
    
window.onload = function(){
    canvas = document.getElementById('gameCanvas');
    canvasContext = canvas.getContext('2d');
    
    document.addEventListener('keydown', keyPressed);
    document.addEventListener('keyup', keyReleased);
    
    setInterval(mainLoop, 1000/50 );
}



//Inputs
    const SPACE_KEY = 32;
    var spaceKeyPressed = false;
    
// Player Variables
    var players =[];
    var playerTotal = 1;
    var gravity = 0.25;
    var jump = false;
    var jHeight = -4.6;

// Enemy Variables
    var enemies =[];
    var enemyTotal = 1;
    
// Set up Variables
    var setUp = true;


function mainLoop(){
        colorRect(0,0,canvas.width,canvas.height,'white'); // Background
        
        if(setUp){
            settingUp();
            setUp = false;
        }
    
        if(players.length > 0){
            players.forEach(function(player,index){
              player.drawPlayer();  
              player.playerMove();
              player.pJump();
              player.pMove();
            });
        }
    
        if(enemies.length > 0){
            enemies.forEach(function(enemy,index){
              enemy.drawEnemy();  
              enemy.enemyMove();
              enemy.newEnemy();
            });
        }
}

    
    

// Color Rect for drawing canvas and objects
function colorRect(x,y,w,h,color){ 
        canvasContext.fillStyle = color;
        canvasContext.fillRect(x,y,w,h);
}

//Space Key Detection
    function keyPressed(evt) {
        if(evt.keyCode == SPACE_KEY){
            jump = true;
            spaceKeyPressed = true;
        }
    }   
    
      function keyReleased(evt) {
        if(evt.keyCode == SPACE_KEY){
            spaceKeyPressed = false;
        }
      }
// Player Class

function makePlayer(){ // player movement and shit
        
            var pWidth = 30;
            const pHeight = 30;
            var pXpos = canvas.width / 2 - pWidth / 2;
            var pYpos = canvas.height / 2 - pHeight;
            var pYspeed = 0;
            var pColor = 'brown';
    
            var p = new Player (pXpos,pYpos,pWidth,pHeight,pColor,pYspeed);
            players.push(p);
    
    }



        function makeEnemy(){
        //bullet Info
        
            var eWidth = 30; //(max - min) + min
            const eHeight = 80;
            var eXpos = canvas.width - eWidth; 
            var eYpos = canvas.height - eHeight;
            var eYspeed = 0;
            var eXspeed = -5; 
            var eColor = 'green';
            
            var e = new Enemy(eXpos,eYpos,eWidth,eHeight,eColor,eXspeed,eYspeed);
            enemies.push(e);
    }
    
function settingUp(){
            for (i=0; i < playerTotal; i++){
                makePlayer();
            }
            for (i=0; i < enemyTotal; i++){
                makeEnemy();
            }
        }
           
    
</script>